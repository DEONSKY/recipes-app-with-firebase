{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\MERTCAN\\\\Desktop\\\\receipes-app\\\\recipes-app-react-native-master\\\\src\\\\screens\\\\EventAdd\\\\EventAdd.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Firebase from \"../../../firebaseConfig\";\nimport * as ImagePicker from 'expo-image-picker';\nimport styles from \"./styles\";\nexport default function Login() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasGalleryPermission = _useState2[0],\n      setHasGalleryPermission = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      image = _useState4[0],\n      setImage = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      description = _useState8[0],\n      setDescription = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      location = _useState10[0],\n      setLocation = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      imageURL = _useState12[0],\n      setImageURL = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      category = _useState14[0],\n      setCategory = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      isPrivate = _useState16[0],\n      setIsPrivate = _useState16[1];\n\n  var toggleSwitch = function toggleSwitch() {\n    return setIsPrivate(function (previousState) {\n      return !previousState;\n    });\n  };\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$ImagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS !== 'web')) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context.sent;\n              status = _await$ImagePicker$re.status;\n              console.log(status);\n              setHasGalleryPermission(status === 'granted');\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var saveTodo = function saveTodo(imageURL) {\n    Firebase.firestore().collection('events').doc(Firebase.auth().currentUser.uid).collection('userEvents').add({\n      name: name,\n      description: description,\n      location: location,\n      imageURL: imageURL\n    }).then(function () {\n      console.log(\"success\");\n    });\n  };\n\n  var crateToDo = function crateToDo() {\n    var childPath, response, blob, task, taskProgress, taskCompleted, taskError;\n    return _regeneratorRuntime.async(function crateToDo$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!image) {\n              _context3.next = 15;\n              break;\n            }\n\n            childPath = \"events/\" + Firebase.auth().currentUser.uid + \"/\" + Math.random().toString(36);\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(fetch(image));\n\n          case 4:\n            response = _context3.sent;\n            _context3.next = 7;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 7:\n            blob = _context3.sent;\n            task = Firebase.storage().ref().child(childPath).put(blob);\n\n            taskProgress = function taskProgress(snapshot) {\n              console.log(\"transferred: \" + snapshot.bytesTransferred);\n            };\n\n            taskCompleted = function taskCompleted() {\n              task.snapshot.ref.getDownloadURL().then(function (snapshot) {\n                saveTodo(snapshot);\n                console.log(snapshot);\n              });\n            };\n\n            taskError = function taskError(snapshot) {\n              console.log(snapshot);\n            };\n\n            task.on(\"state_changed\", taskProgress, taskError, taskCompleted);\n            _context3.next = 16;\n            break;\n\n          case 15:\n            saveTodo(\"https://firebasestorage.googleapis.com/v0/b/mobil-programlama-b7483.appspot.com/o/events%2FmBa4IuAMM7cjCib4bQRfrtOGuHA2%2Ffunction%20random()%20%7B%20%5Bnative%20code%5D%20%7D?alt=media&token=1954d5e9-e15b-4d9c-af73-89e38f5fcbea\");\n\n          case 16:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (hasGalleryPermission === false) {\n    return React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 12\n      }\n    }, \"No access to galery\");\n  }\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, React.createElement(KeyboardAvoidingView, {\n    behavior: \"padding\",\n    style: styles.formBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, React.createElement(Button, {\n    title: \"Pick Image From Gallery\",\n    onPress: function onPress() {\n      return pickImage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }), React.createElement(Image, {\n    source: {\n      uri: image\n    },\n    style: {\n      minHeight: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.formItems,\n    placeholder: \"name\",\n    onChangeText: function onChangeText(name) {\n      return setName(name);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.formItems,\n    placeholder: \"description\",\n    onChangeText: function onChangeText(description) {\n      return setDescription(description);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.formItems,\n    placeholder: \"location\",\n    onChangeText: function onChangeText(location) {\n      return setLocation(location);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.formItems,\n    placeholder: \"imageURL\",\n    onChangeText: function onChangeText(imageURL) {\n      return setImageURL(imageURL);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.formItems,\n    placeholder: \"category\",\n    onChangeText: function onChangeText(category) {\n      return setImageURL(category);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, isPrivate ? \"Private\" : \"Public\"), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, isPrivate ? \"Private\" : \"Public\"), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, isPrivate ? \"Private\" : \"Public\"), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, isPrivate ? \"Private\" : \"Public\"), React.createElement(Switch, {\n    trackColor: {\n      false: '#767577',\n      true: '#81b0ff'\n    },\n    thumbColor: isPrivate ? '#f5dd4b' : '#f4f3f4',\n    ios_backgroundColor: \"#3e3e3e\",\n    onValueChange: toggleSwitch,\n    value: isPrivate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    style: styles.button,\n    onPress: function onPress() {\n      return crateToDo();\n    },\n    title: \"Sign Up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }))));\n}","map":{"version":3,"sources":["C:/Users/MERTCAN/Desktop/receipes-app/recipes-app-react-native-master/src/screens/EventAdd/EventAdd.js"],"names":["React","useState","useEffect","Firebase","ImagePicker","styles","Login","hasGalleryPermission","setHasGalleryPermission","image","setImage","name","setName","description","setDescription","location","setLocation","imageURL","setImageURL","category","setCategory","isPrivate","setIsPrivate","toggleSwitch","previousState","Platform","OS","requestMediaLibraryPermissionsAsync","status","console","log","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","result","cancelled","uri","saveTodo","firestore","collection","doc","auth","currentUser","uid","add","then","crateToDo","childPath","Math","random","toString","fetch","response","blob","task","storage","ref","child","put","taskProgress","snapshot","bytesTransferred","taskCompleted","getDownloadURL","taskError","on","formBox","minHeight","formItems","false","true","button"],"mappings":"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","sourcesContent":["import React, {useState,useEffect } from 'react'\r\nimport {View,Button,TextInput,Text,Image, Switch,KeyboardAvoidingView} from 'react-native'\r\nimport Firebase from '../../../firebaseConfig';\r\nimport * as ImagePicker from 'expo-image-picker'\r\nimport styles from \"./styles\";\r\n\r\n\r\nexport default function Login() {\r\n\r\n  const [hasGalleryPermission, setHasGalleryPermission] = useState(null);\r\n  const [image, setImage] = useState(null);\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [description, setDescription] = useState(\"\")\r\n  const [location,setLocation] = useState(\"\")\r\n  const [imageURL,setImageURL] = useState(\"\")\r\n  const [category,setCategory] = useState(\"\")\r\n\r\n  const [isPrivate, setIsPrivate] = useState(false);\r\n  const toggleSwitch = () => setIsPrivate(previousState => !previousState);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (Platform.OS !== 'web') {\r\n        const {status} = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        console.log(status)\r\n        setHasGalleryPermission(status === 'granted')\r\n      }\r\n    })();\r\n  },[]);\r\n\r\n  const pickImage = async () => {\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n      allowsEditing: true,\r\n      aspect: [1, 1],\r\n      quality: 1,\r\n    });\r\n\r\n    console.log(result);\r\n\r\n    if (!result.cancelled) {\r\n      setImage(result.uri);\r\n    }\r\n  };\r\n\r\n\r\n  const saveTodo = (imageURL) => {\r\n    Firebase.firestore()\r\n      .collection('events')\r\n      .doc(Firebase.auth().currentUser.uid)\r\n      .collection('userEvents')\r\n      .add({\r\n        name,\r\n        description,\r\n        location,\r\n        imageURL,\r\n      }).then((function () {\r\n        console.log(\"success\")\r\n      }))\r\n  }\r\n  const crateToDo = async () => {\r\n    if(image){\r\n      const childPath = `events/${Firebase.auth().currentUser.uid}/${Math.random().toString(36)}`\r\n\r\n      const response = await fetch(image)\r\n      const blob = await response.blob();\r\n  \r\n      const task = Firebase\r\n        .storage()\r\n        .ref()\r\n        .child(childPath)\r\n        .put(blob)\r\n  \r\n      const taskProgress = snapshot => {\r\n        console.log(`transferred: ${snapshot.bytesTransferred}`)\r\n      }\r\n  \r\n      const taskCompleted = () => {\r\n        task.snapshot.ref.getDownloadURL().then((snapshot) => {\r\n          saveTodo(snapshot)\r\n          console.log(snapshot)\r\n        })\r\n      }\r\n  \r\n      const taskError = snapshot => {\r\n        console.log(snapshot)\r\n      }\r\n  \r\n      task.on(\"state_changed\",taskProgress,taskError,taskCompleted)\r\n    }else{\r\n      saveTodo(\"https://firebasestorage.googleapis.com/v0/b/mobil-programlama-b7483.appspot.com/o/events%2FmBa4IuAMM7cjCib4bQRfrtOGuHA2%2Ffunction%20random()%20%7B%20%5Bnative%20code%5D%20%7D?alt=media&token=1954d5e9-e15b-4d9c-af73-89e38f5fcbea\")\r\n    }\r\n\r\n  \r\n  }\r\n    \r\n  if(hasGalleryPermission === false) {\r\n    return <Text>No access to galery</Text>\r\n  }\r\n\r\n  \r\n  return (\r\n    <View >\r\n        <View >\r\n        <KeyboardAvoidingView behavior='padding' style={styles.formBox}>\r\n        <Button title=\"Pick Image From Gallery\" onPress = {()=>pickImage()} />\r\n        <Image source={{uri:image}} style={{ minHeight:200}} />\r\n        <TextInput\r\n          style={styles.formItems}\r\n          placeholder= \"name\"\r\n          onChangeText={name=>setName(name)}\r\n        />\r\n        <TextInput\r\n          style={styles.formItems}\r\n          placeholder= \"description\"\r\n          onChangeText={description=>setDescription(description)}\r\n        />\r\n        <TextInput\r\n          style={styles.formItems}\r\n          placeholder= \"location\"\r\n          onChangeText={location=>setLocation(location)}\r\n        />\r\n        <TextInput\r\n          style={styles.formItems}\r\n          placeholder= \"imageURL\"\r\n          onChangeText={imageURL=>setImageURL(imageURL)}\r\n        />\r\n        <TextInput\r\n          style={styles.formItems}\r\n          placeholder= \"category\"\r\n          onChangeText={category=>setImageURL(category)}\r\n        />\r\n        <Text>\r\n           {isPrivate?\"Private\":\"Public\"}\r\n        </Text>\r\n        <Text>\r\n           {isPrivate?\"Private\":\"Public\"}\r\n        </Text>\r\n        <Text>\r\n           {isPrivate?\"Private\":\"Public\"}\r\n        </Text>\r\n        <Text>\r\n           {isPrivate?\"Private\":\"Public\"}\r\n        </Text>\r\n        <Switch\r\n          trackColor={{ false: '#767577', true: '#81b0ff' }}\r\n          thumbColor={isPrivate ? '#f5dd4b' : '#f4f3f4'}\r\n          ios_backgroundColor=\"#3e3e3e\"\r\n          onValueChange={toggleSwitch}\r\n          value={isPrivate}\r\n        />\r\n        <Button\r\n          style={styles.button}\r\n          onPress={()=>crateToDo()}\r\n          title=\"Sign Up\"/>\r\n          </KeyboardAvoidingView>\r\n        </View>\r\n    </View>\r\n  )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}